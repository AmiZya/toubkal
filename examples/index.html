<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    
    <title>Toubkal - Examples</title>
    
    <!-- Bootstrap version 3.3.4 CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Lato:400,700,400italic|Oswald&subset=latin,latin-ext"/>
    <link href="css/base.css"  type="text/css" rel="stylesheet" /> <!-- base css style for all web pages -->
    
    <script src="/socket.io/socket.io.js"></script>
    
    <script src="/lib/toubkal-min.js"></script>
  </head>
  
  <body>
    <h3>Toubkal Examples</h3>
    
    <ul id="examples"></ul>
    
    <script>
      rs.socket_io_server()
        .Singleton( '$examples', function( source, options ) {
          return source
            .trace( 'examples' )
            .$query_selector( '#examples' )
          ;
        } )
        
        .flow( 'examples', { key: [ 'id' ] } )
        
        .trace( 'before $to_dom()' )
        
        .$to_dom( rs.$examples() )
        
        //.trace( 'between $to_dom()' )
         
        .alter( function( v ) {
          v.tag = 'a';
          v.content = v.title;
          v.attributes = { href: v.path };
        } )
        
        .$to_dom()
      ;
      
      rs.beat( 10000 )
        .$examples()
      ;
      
      rs.once( 9000 )
        .map( function( v ) { return { interval: 10000 } } )
        .beat()
        .revert()
        .$examples()
      ;
    </script>
  </body>
</html>
