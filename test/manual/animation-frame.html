<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <title>Request Animation Frame</title>
  
  <script src="../../lib/toubkal-min.js" type="text/javascript"></script>
</head>

<body>
  
  <h3>Request Animation Frame</h3>
  
  
  <script type="text/javascript">
    // initialization
    var $canvas = document.createElement( 'canvas' )
      , context = $canvas.getContext( '2d' )
    ;
    
    // canvas size
    $canvas.width  = 512;
    $canvas.height = 512;
    
    // append the canvas element to the body
    document.body.appendChild( $canvas );
    
    // animation frame pipelet
    rs
      .animation_frames()
      
      .alter( draw )
    ;
    
    // draw
    function draw( v ) {
      var time   = new Date().getTime() * 0.002
        , x      = Math.sin( time ) * 192 + 256
        , y      = Math.cos( time * 0.9 ) * 192 + 256
      ;
      
      console.log( 'here', v );
      
      context.fillStyle = 'rgb(20,20,200)';
      context.beginPath();
      context.arc( x, y, 10, 0, Math.PI * 2, true );
      context.closePath();
      context.fill();
    } // draw()
  </script>
  
</body>

</html>
