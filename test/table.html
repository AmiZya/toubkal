<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <link rel="stylesheet" media="all" type="text/css" href="css/table.css" />
    
    <script type="text/javascript" charset="utf-8" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src="javascript/es5.js"></script>
    
    <title>XS Table</title>
    
    <script type="text/javascript" charset="utf-8" src="../src/xs.js"></script>
    <script type="text/javascript" charset="utf-8" src="../src/code.js"></script>
    <script type="text/javascript" charset="utf-8" src="../src/connection.js"></script>
    <script type="text/javascript" charset="utf-8" src="../src/filter.js"></script>
    <script type="text/javascript" charset="utf-8" src="../src/ordered_set.js"></script>
    <script type="text/javascript" charset="utf-8" src="../src/aggregator.js"></script>
    <script type="text/javascript" charset="utf-8" src="../src/table.js"></script>
    
  </head>
  
  <body>
    <h4>XS Table</h4>
    
    <div>
      <h5>Add books</h3>
      
      <label for="_id">ID</label><input id="_id" type="text" />
      <label for="_title">Title</label><input id="_title" type="text" />
      <label for="_author">Author</label><input id="_author" type="text" />
      <label for="_year">Year</label><input id="_year" type="text" />
      <input id="add_books" type="button" value="ADD" />
    </div>
    
    <div>
      <h5>Add columns</h3>
      
      <label for="_column_id">ID</label><input id="_column_id" type="text" />
      <label for="_column_label">Label</label><input id="_column_label" type="text" />
      <input id="add_columns" type="button" value="ADD" />
    </div>
    
    <div id="demo"></div>
    
    <script type="text/javascript" charset="utf-8">
      var columns = new XS.Set( [
            { id: "id"    , label: "ID"     },
            { id: "title" , label: "Title"  },
            { id: "author", label: "Author" }
          ], { name: "Columns Set" } )
        
        , organizer = new XS.Set( [ { id: "title" } ], { name: "Organizer: by title ascending" } )
        
        , books = new XS.Ordered_Set( [
            { id: 1, title: "A Tale of Two Cities"             , author: "Charles Dickens" , year: 1859 },
            { id: 2, title: "The Lord of the Rings"            , author: "J. R. R. Tolkien", year: 1955 },
            { id: 3, title: "Charlie and the Chocolate Factory", author: "Roald Dahl"                   },
            { id: 4, title: "The Da Vinci Code"                , author: "Dan Brown"       , year: 2003 }
          ], organizer, { name: "Books" } )
      ;
      
      
      books.table( document.getElementById( "demo" ), columns, organizer, {
        caption: "List of the best-selling books (source: wikipedia)"
      } );
      
      books.add( [
        { id:  5, title: "Angels and Demons"                           , author: "Dan Brown"      , year: 2000 },
        { id:  6, title: "The Girl with the Dragon Tattoo"             , author: "Stieg Larsson"          , year: 2005 },
        { id:  7, title: "The McGuffey Readers"                        , author: "William Holmes McGuffey", year: 1853 },
        { id:  8, title: "The Hobbit"                                  , author: "J. R. R. Tolkien"       , year: 1937 },
        { id:  9, title: "The Hunger Games"                            , author: "Suzanne Collins"        , year: 2008 },
        { id: 10, title: "Harry Potter and the Prisoner of Azkaban"    , author: "J.K. Rowling"           , year: 1999 },
        { id: 11, title: "The Dukan Diet"                              , author: "Pierre Dukan"           , year: 2000 },
        { id: 12, title: "Breaking Dawn"                               , author: "Stephenie Meyer"        , year: 2008 },
        { id: 13, title: "Lolita"                                      , author: "Vladimir Nabokov"       , year: 1955 },
        { id: 14, title: "And Then There Were None"                    , author: "Agatha Christie"        , year: undefined },
        { id: 15, title: "Steps to Christ"                             , author: "Ellen G. White"         , year: null }
      ] );
      
      columns.add( [ { id: "year" , label: "Year", align: "center" } ] );
      
      books.remove( [
        { id:  1, title: "A Tale of Two Cities"                    , author: "Charles Dickens"        , year: 1859 },
        { id: 13, title: "Lolita"                                  , author: "Vladimir Nabokov"       , year: 1955 },
        { id:  7, title: "The McGuffey Readers"                    , author: "William Holmes McGuffey", year: 1853 }
      ] );
      
      books.update( [
        [
          { id:  2, title: "The Lord of the Rings"                            , author: "J. R. R. Tolkien"         , year: 1955 },
          { id:  2, title: "The Lord of the Rings: The Fellowship of the Ring", author: "John Ronald Reuel Tolkien", year: 1955 }
        ],
        [
          { id: 10, title: "Harry Potter and the Prisoner of Azkaban", author: "J.K. Rowling"  , year: 1999 },
          { id: 10, title: "Harry Potter and the Prisoner of Azkaban", author: "Joanne Rowling", year: 1999 }
        ]
      ] );
      
      // organizer.update( [ [ { id: "title" }, { id: "author" } ] ] );
      
      /*
      books.add( [
        { id:  1, title: "A Tale of Two Cities"                    , author: "Charles Dickens"        , year: 1859 },
        { id:  2, title: "The Lord of the Rings"                   , author: "J. R. R. Tolkien"       , year: 1955 },
        { id:  3, title: "The Da Vinci Code"                       , author: "Dan Brown"              , year: 2003 },
        { id:  4, title: "The Alchemist"                           , author: "Paulo Coelho"           , year: 1988 },
        { id:  5, title: "Angels and Demons"                       , author: "Dan Brown"              , year: 2000 },
        { id:  9, title: "The Hunger Games"                        , author: "Suzanne Collins"        , year: 2008 },
        { id: 10, title: "Harry Potter and the Prisoner of Azkaban", author: "J.K. Rowling"           , year: 1999 },
        { id: 11, title: "The Dukan Diet"                          , author: "Pierre Dukan"           , year: 2000 },
        { id: 12, title: "Breaking Dawn"                           , author: "Stephenie Meyer"        , year: 2008 },
        { id: 13, title: "Lolita"                                  , author: "Vladimir Nabokov"       , year: 1955 },
        { id: 14, title: "And Then There Were None"                , author: "Agatha Christie"        , year: undefined },
        { id: 15, title: "Steps to Christ"                         , author: "Ellen G. White"         , year: null },
        { id: 16, title: "Charlie and the Chocolate Factory"       , author: "Roald Dahl"                          }
      ] );
      */
      
      $( "#add_books"   ).click( add_books   );
      $( "#add_columns" ).click( add_columns );
      
      function add_books() {
        var _id     = $( "#_id"     ).val()
          , _title  = $( "#_title"  ).val()
          , _author = $( "#_author" ).val()
          , _year   = $( "#_year"   ).val()
        ;
        
        if( _id === "" || _title === "" || _author === "" || _year === "" ) return;
        
        books.add( [ { id: _id, title: _title, author: _author, year: _year } ] );
      }
      
      function add_columns() {
        var _id    = $( "#_column_id"    ).val()
          , _label = $( "#_column_label" ).val()
        ;
        
        if( _id === "" || _label === "" ) return;
        
        columns.add( [ { id: _id, label: _label } ] );
      }
    </script>
  </body>
</html>



